<%-include('../partials/user-header')%>
<%-include('../partials/user-nav')%>

<section class="signin-page account">
    <div class="container">
      <div class="row">
        <div class="col-md-6 col-md-offset-3">
          <div class="block text-center">
            <a class="logo" href="index.html">
              <img src="images/logo.png" alt="">
            </a>
            <h2 class="text-center">Welcome Back</h2>
            <form class="text-left clearfix" action="/login" method="post"  onsubmit="return validateBasic()"  >
              <div class="form-group">
                <input type="email" class="form-control" name="email"  placeholder="Email">
              </div>
              <div class="form-group">
                <input type="password" class="form-control" name="password" placeholder="Password">
              </div>
              <% if(locals.message){%>
                <div id="msg" class="alert alert-danger text-center">
                   <%= message %>
                </div>
                <% } %>
                <% if(locals.msg){%>
                  <div id="msg1" class="alert alert-danger text-center">
                     <%= msg %>
                  </div>
                  <% } %>
                
              <div class="text-center">
                <button type="submit" class="btn btn-main text-center" >Login</button>
                
              </div>
            </form>
            <div>
              <h1>OR</h1>
            </div>
            <a href="/login-otp"><button  class="btn btn-main text-center" >LOGIN WITH OTP</button></a>
            <p class="mt-20">New in this site ?<a href="signup"> Create New Account</a></p>
            <p><a href="/forgotPassword"> Forgot your password?</a></p>
          </div>
        </div>
      </div>
    </div>
  </section>
  <script>
    setTimeout(()=>{
      document.getElementById('msg').style.display='none'
    },2000)

    setInterval(()=>{
      document.getElementById('msg1').style.display='none'
    },2000)


    function validateBasic() {
 

 var email = document.forms["basic"]["email"].value.trim();

 var password = document.forms["basic"]["password"].value;






 // Validation for email field
 if (email == "") {
  Swal.fire({
       icon: 'error',
       title: 'Oops...',
       text: 'Email must be filled out',
       footer: '<a href="">Why do I have this issue?</a>',
       confirmButtonColor: '#000000',
})
     return false;
 } else {
     // regex for email validation
     var email_regex = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;

     if (!email_regex.test(email)) {
      Swal.fire({
           icon: 'error',
            title: 'Oops...',
             text: 'Invalid Email Address',
       footer: '<a href="">Why do I have this issue?</a>',
       confirmButtonColor: '#000000',
})
         return false;
     }
 }
//validation for username


 // Validation for password field
 if (password == "") {
  Swal.fire({
       icon: 'error',
       title: 'Oops...',
       text: 'password must be 8 characters',
       footer: '<a href="">Why do I have this issue?</a>',
       confirmButtonColor: '#000000',
})
     return false;
 }
 
 
 return true; // form is valid
}
  </script>
<%-include('../partials/user-footer')%>
